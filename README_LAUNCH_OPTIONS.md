# PiDrone Launch Options

Этот файл объясняет различные опции запуска для пакета PiDrone.

## Обновление: Совмещенная функциональность

В последней версии пакета `msp_offboard.py` был модифицирован, чтобы включить всю функциональность из `flight_controller_node.py`. Теперь достаточно запустить только узел `msp_offboard`, чтобы получить все возможности:
- Коммуникацию с полетным контроллером
- Публикацию IMU данных
- Мониторинг heartbeat других узлов
- Расширенные функции управления позицией и скоростью

## Рекомендуемый вариант запуска

```bash
roslaunch pidrone_pkg msp_offboard_only.launch
```

Это запустит обновленную версию MSP Offboard с полной функциональностью.

## Устаревшие варианты запуска (НЕ РЕКОМЕНДУЮТСЯ)

### 1. Использование только flight_controller_node.py

```bash
roslaunch pidrone_pkg flight_controller_only.launch
```

⚠️ Не рекомендуется, так как не обеспечивает полную функциональность.

### 2. Оригинальный запуск (ПРОБЛЕМНЫЙ - НЕ ИСПОЛЬЗОВАТЬ!)

```bash
roslaunch pidrone_pkg msp_offboard.launch
```

⚠️ **ВНИМАНИЕ**: Этот файл запуска пытается запустить одновременно `flight_controller_node.py` и `msp_offboard.py`, что приведет к ошибкам из-за конфликта доступа к одному и тому же последовательному порту.

## Устранение неполадок

Если вы видите ошибки типа:
```
"Didn't get valid header: "
"Failed to get data after 3 attempts"
"Exception in receiveDataPacket: device reports readiness to read but returned no data (device disconnected or multiple access on port?)"
```

Это означает, что несколько узлов пытаются подключиться к одному последовательному порту. Используйте только `msp_offboard_only.launch`.

## Преимущества обновленной версии

- Объединенный код устраняет конфликты доступа к последовательному порту
- Более чистая архитектура с одним узлом для связи с полетным контроллером
- Сохранение всех возможностей обоих узлов в одном
- Улучшенная стабильность системы 